function cov_2ci03pf8u3(){var path="C:\\Users\\user\\OneDrive - Temasek Polytechnic\\Desktop\\devops\\DVOPS-part1\\utils\\EditProfile.js";var hash="abac4793e67f5e28e1939333785988ec87d3173e";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"C:\\Users\\user\\OneDrive - Temasek Polytechnic\\Desktop\\devops\\DVOPS-part1\\utils\\EditProfile.js",statementMap:{"0":{start:{line:1,column:32},end:{line:1,column:53}},"1":{start:{line:3,column:10},end:{line:3,column:32}},"2":{start:{line:8,column:4},end:{line:47,column:1}},"3":{start:{line:10,column:17},end:{line:10,column:30}},"4":{start:{line:11,column:20},end:{line:11,column:37}},"5":{start:{line:12,column:17},end:{line:12,column:31}},"6":{start:{line:13,column:18},end:{line:13,column:34}},"7":{start:{line:14,column:15},end:{line:14,column:28}},"8":{start:{line:16,column:22},end:{line:16,column:56}},"9":{start:{line:17,column:18},end:{line:17,column:23}},"10":{start:{line:18,column:4},end:{line:30,column:5}},"11":{start:{line:18,column:14},end:{line:18,column:15}},"12":{start:{line:19,column:28},end:{line:19,column:41}},"13":{start:{line:20,column:8},end:{line:29,column:9}},"14":{start:{line:22,column:12},end:{line:22,column:36}},"15":{start:{line:23,column:12},end:{line:23,column:44}},"16":{start:{line:24,column:12},end:{line:24,column:38}},"17":{start:{line:25,column:12},end:{line:25,column:42}},"18":{start:{line:26,column:12},end:{line:26,column:36}},"19":{start:{line:27,column:12},end:{line:27,column:26}},"20":{start:{line:31,column:4},end:{line:35,column:5}},"21":{start:{line:32,column:8},end:{line:32,column:23}},"22":{start:{line:33,column:8},end:{line:33,column:74}},"23":{start:{line:36,column:5},end:{line:43,column:5}},"24":{start:{line:37,column:8},end:{line:37,column:82}},"25":{start:{line:38,column:8},end:{line:38,column:80}},"26":{start:{line:42,column:8},end:{line:42,column:78}},"27":{start:{line:46,column:0},end:{line:46,column:54}},"28":{start:{line:49,column:0},end:{line:52,column:2}}},fnMap:{"0":{name:"editProfile",decl:{start:{line:7,column:15},end:{line:7,column:26}},loc:{start:{line:7,column:35},end:{line:48,column:1}},line:7}},branchMap:{"0":{loc:{start:{line:20,column:8},end:{line:29,column:9}},type:"if",locations:[{start:{line:20,column:8},end:{line:29,column:9}},{start:{line:20,column:8},end:{line:29,column:9}}],line:20},"1":{loc:{start:{line:31,column:4},end:{line:35,column:5}},type:"if",locations:[{start:{line:31,column:4},end:{line:35,column:5}},{start:{line:31,column:4},end:{line:35,column:5}}],line:31},"2":{loc:{start:{line:36,column:5},end:{line:43,column:5}},type:"if",locations:[{start:{line:36,column:5},end:{line:43,column:5}},{start:{line:36,column:5},end:{line:43,column:5}}],line:36}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0},f:{"0":0},b:{"0":[0,0],"1":[0,0],"2":[0,0]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"abac4793e67f5e28e1939333785988ec87d3173e"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_2ci03pf8u3=function(){return actualCoverage;};}return actualCoverage;}cov_2ci03pf8u3();const{readJSON,writeJSON}=(cov_2ci03pf8u3().s[0]++,require('./UserUtil'));const fs=(cov_2ci03pf8u3().s[1]++,require('fs').promises);async function editProfile(req,res){cov_2ci03pf8u3().f[0]++;cov_2ci03pf8u3().s[2]++;try{const name=(cov_2ci03pf8u3().s[3]++,req.body.name);const password=(cov_2ci03pf8u3().s[4]++,req.body.password);const level=(cov_2ci03pf8u3().s[5]++,req.body.level);const time_in=(cov_2ci03pf8u3().s[6]++,req.body.time_in);const date=(cov_2ci03pf8u3().s[7]++,req.body.date);const allProfile=(cov_2ci03pf8u3().s[8]++,await readJSON('utils/users.json'));var modified=(cov_2ci03pf8u3().s[9]++,false);cov_2ci03pf8u3().s[10]++;for(var i=(cov_2ci03pf8u3().s[11]++,0);i<allProfile.length;i++){var curcurrProfile=(cov_2ci03pf8u3().s[12]++,allProfile[i]);cov_2ci03pf8u3().s[13]++;if(curcurrProfile.name==name){cov_2ci03pf8u3().b[0][0]++;cov_2ci03pf8u3().s[14]++;allProfile[i].name=name;cov_2ci03pf8u3().s[15]++;allProfile[i].password=password;cov_2ci03pf8u3().s[16]++;allProfile[i].level=level;cov_2ci03pf8u3().s[17]++;allProfile[i].time_in=time_in;cov_2ci03pf8u3().s[18]++;allProfile[i].date=date;cov_2ci03pf8u3().s[19]++;modified=true;}else{cov_2ci03pf8u3().b[0][1]++;}}cov_2ci03pf8u3().s[20]++;if(password.length<6){cov_2ci03pf8u3().b[1][0]++;cov_2ci03pf8u3().s[21]++;//if modified ==true
modified==false;cov_2ci03pf8u3().s[22]++;return res.status(500).json({message:'Password legth too short'});}else{cov_2ci03pf8u3().b[1][1]++;}cov_2ci03pf8u3().s[23]++;if(modified==true){cov_2ci03pf8u3().b[2][0]++;cov_2ci03pf8u3().s[24]++;//if modified ==true
await fs.writeFile('utils/users.json',JSON.stringify(allProfile),'utf-8');cov_2ci03pf8u3().s[25]++;return res.status(201).json({message:'Profile modified successfully!'});}else{cov_2ci03pf8u3().b[2][1]++;cov_2ci03pf8u3().s[26]++;return res.status(500).json({message:'Error occured,Unable to edit'});}}catch(error){cov_2ci03pf8u3().s[27]++;return res.status(500).json({message:error.message});}}cov_2ci03pf8u3().s[28]++;module.exports={editProfile};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJjb3ZfMmNpMDNwZjh1MyIsImFjdHVhbENvdmVyYWdlIiwicmVhZEpTT04iLCJ3cml0ZUpTT04iLCJzIiwicmVxdWlyZSIsImZzIiwicHJvbWlzZXMiLCJlZGl0UHJvZmlsZSIsInJlcSIsInJlcyIsImYiLCJuYW1lIiwiYm9keSIsInBhc3N3b3JkIiwibGV2ZWwiLCJ0aW1lX2luIiwiZGF0ZSIsImFsbFByb2ZpbGUiLCJtb2RpZmllZCIsImkiLCJsZW5ndGgiLCJjdXJjdXJyUHJvZmlsZSIsImIiLCJzdGF0dXMiLCJqc29uIiwibWVzc2FnZSIsIndyaXRlRmlsZSIsIkpTT04iLCJzdHJpbmdpZnkiLCJlcnJvciIsIm1vZHVsZSIsImV4cG9ydHMiXSwic291cmNlcyI6WyJFZGl0UHJvZmlsZS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCB7IHJlYWRKU09OLCB3cml0ZUpTT04gfSA9IHJlcXVpcmUoJy4vVXNlclV0aWwnKVxyXG5cclxuY29uc3QgZnMgPXJlcXVpcmUoJ2ZzJykucHJvbWlzZXM7XHJcblxyXG4gICBcclxuXHJcbmFzeW5jIGZ1bmN0aW9uIGVkaXRQcm9maWxlKHJlcSxyZXMpe1xyXG4gICAgdHJ5e1xyXG4gICAgXHJcbiAgICBjb25zdCBuYW1lID0gcmVxLmJvZHkubmFtZTtcclxuICAgIGNvbnN0IHBhc3N3b3JkID1yZXEuYm9keS5wYXNzd29yZDtcclxuICAgIGNvbnN0IGxldmVsID1yZXEuYm9keS5sZXZlbDtcclxuICAgIGNvbnN0IHRpbWVfaW49cmVxLmJvZHkudGltZV9pbjtcclxuICAgIGNvbnN0IGRhdGU9cmVxLmJvZHkuZGF0ZTtcclxuICAgIFxyXG4gICAgY29uc3QgYWxsUHJvZmlsZSA9YXdhaXQgcmVhZEpTT04oJ3V0aWxzL3VzZXJzLmpzb24nKTtcclxuICAgIHZhciBtb2RpZmllZCA9ZmFsc2U7XHJcbiAgICBmb3IodmFyIGk9MDtpPGFsbFByb2ZpbGUubGVuZ3RoO2krKyl7XHJcbiAgICAgICAgdmFyIGN1cmN1cnJQcm9maWxlID1hbGxQcm9maWxlW2ldO1xyXG4gICAgICAgIGlmKGN1cmN1cnJQcm9maWxlLm5hbWU9PW5hbWUpe1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgYWxsUHJvZmlsZVtpXS5uYW1lPW5hbWU7XHJcbiAgICAgICAgICAgIGFsbFByb2ZpbGVbaV0ucGFzc3dvcmQ9cGFzc3dvcmQ7XHJcbiAgICAgICAgICAgIGFsbFByb2ZpbGVbaV0ubGV2ZWw9bGV2ZWw7XHJcbiAgICAgICAgICAgIGFsbFByb2ZpbGVbaV0udGltZV9pbj10aW1lX2luO1xyXG4gICAgICAgICAgICBhbGxQcm9maWxlW2ldLmRhdGU9ZGF0ZTtcclxuICAgICAgICAgICAgbW9kaWZpZWQ9dHJ1ZTtcclxuXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgaWYocGFzc3dvcmQubGVuZ3RoPDYpey8vaWYgbW9kaWZpZWQgPT10cnVlXHJcbiAgICAgICAgbW9kaWZpZWQ9PWZhbHNlXHJcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNTAwKS5qc29uKHttZXNzYWdlOidQYXNzd29yZCBsZWd0aCB0b28gc2hvcnQnfSk7XHJcbiAgICAgICAgXHJcbiAgICB9XHJcbiAgICAgaWYobW9kaWZpZWQ9PXRydWUpey8vaWYgbW9kaWZpZWQgPT10cnVlXHJcbiAgICAgICAgYXdhaXQgZnMud3JpdGVGaWxlKCd1dGlscy91c2Vycy5qc29uJyxKU09OLnN0cmluZ2lmeShhbGxQcm9maWxlKSwndXRmLTgnKTtcclxuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cygyMDEpLmpzb24oe21lc3NhZ2U6J1Byb2ZpbGUgbW9kaWZpZWQgc3VjY2Vzc2Z1bGx5ISd9KTtcclxuICAgICAgICBcclxuICAgIH1cclxuICAgZWxzZXtcclxuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg1MDApLmpzb24oe21lc3NhZ2U6J0Vycm9yIG9jY3VyZWQsVW5hYmxlIHRvIGVkaXQnfSk7XHJcbiAgICB9XHJcbiAgIFxyXG59Y2F0Y2goZXJyb3Ipe1xyXG5yZXR1cm4gcmVzLnN0YXR1cyg1MDApLmpzb24oe21lc3NhZ2U6IGVycm9yLm1lc3NhZ2V9KTtcclxufVxyXG59XHJcbm1vZHVsZS5leHBvcnRzPXtcclxuICAgIGVkaXRQcm9maWxlXHJcbiAgICBcclxufTsiXSwibWFwcGluZ3MiOiJrckdBZVk7QUFBQUEsY0FBQSxTQUFBQSxDQUFBLFNBQUFDLGNBQUEsV0FBQUEsY0FBQSxFQUFBRCxjQUFBLEdBZlosS0FBTSxDQUFFRSxRQUFRLENBQUVDLFNBQVUsQ0FBQyxFQUFBSCxjQUFBLEdBQUFJLENBQUEsTUFBR0MsT0FBTyxDQUFDLFlBQVksQ0FBQyxFQUVyRCxLQUFNLENBQUFDLEVBQUUsRUFBQU4sY0FBQSxHQUFBSSxDQUFBLE1BQUVDLE9BQU8sQ0FBQyxJQUFJLENBQUMsQ0FBQ0UsUUFBUSxFQUloQyxjQUFlLENBQUFDLFdBQVdBLENBQUNDLEdBQUcsQ0FBQ0MsR0FBRyxDQUFDLENBQUFWLGNBQUEsR0FBQVcsQ0FBQSxNQUFBWCxjQUFBLEdBQUFJLENBQUEsTUFDL0IsR0FBRyxDQUVILEtBQU0sQ0FBQVEsSUFBSSxFQUFBWixjQUFBLEdBQUFJLENBQUEsTUFBR0ssR0FBRyxDQUFDSSxJQUFJLENBQUNELElBQUksRUFDMUIsS0FBTSxDQUFBRSxRQUFRLEVBQUFkLGNBQUEsR0FBQUksQ0FBQSxNQUFFSyxHQUFHLENBQUNJLElBQUksQ0FBQ0MsUUFBUSxFQUNqQyxLQUFNLENBQUFDLEtBQUssRUFBQWYsY0FBQSxHQUFBSSxDQUFBLE1BQUVLLEdBQUcsQ0FBQ0ksSUFBSSxDQUFDRSxLQUFLLEVBQzNCLEtBQU0sQ0FBQUMsT0FBTyxFQUFBaEIsY0FBQSxHQUFBSSxDQUFBLE1BQUNLLEdBQUcsQ0FBQ0ksSUFBSSxDQUFDRyxPQUFPLEVBQzlCLEtBQU0sQ0FBQUMsSUFBSSxFQUFBakIsY0FBQSxHQUFBSSxDQUFBLE1BQUNLLEdBQUcsQ0FBQ0ksSUFBSSxDQUFDSSxJQUFJLEVBRXhCLEtBQU0sQ0FBQUMsVUFBVSxFQUFBbEIsY0FBQSxHQUFBSSxDQUFBLE1BQUUs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