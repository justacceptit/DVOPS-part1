function cov_3b0pv71ju(){var path="C:\\Users\\user\\OneDrive - Temasek Polytechnic\\Desktop\\devops\\DVOPS-part1\\utils\\EndOfDay.js";var hash="fbad5f20607d0f4aee17bd822e3ba74dd8428596";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"C:\\Users\\user\\OneDrive - Temasek Polytechnic\\Desktop\\devops\\DVOPS-part1\\utils\\EndOfDay.js",statementMap:{"0":{start:{line:2,column:32},end:{line:2,column:53}},"1":{start:{line:4,column:10},end:{line:4,column:32}},"2":{start:{line:6,column:4},end:{line:25,column:1}},"3":{start:{line:10,column:22},end:{line:10,column:56}},"4":{start:{line:13,column:18},end:{line:13,column:49}},"5":{start:{line:14,column:4},end:{line:23,column:1}},"6":{start:{line:14,column:14},end:{line:14,column:15}},"7":{start:{line:15,column:28},end:{line:15,column:41}},"8":{start:{line:18,column:12},end:{line:22,column:13}},"9":{start:{line:20,column:16},end:{line:20,column:88}},"10":{start:{line:21,column:17},end:{line:21,column:69}},"11":{start:{line:24,column:0},end:{line:24,column:54}},"12":{start:{line:29,column:0},end:{line:31,column:2}}},fnMap:{"0":{name:"EndOfDay",decl:{start:{line:5,column:15},end:{line:5,column:23}},loc:{start:{line:5,column:32},end:{line:26,column:1}},line:5}},branchMap:{"0":{loc:{start:{line:18,column:12},end:{line:22,column:13}},type:"if",locations:[{start:{line:18,column:12},end:{line:22,column:13}},{start:{line:18,column:12},end:{line:22,column:13}}],line:18}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0},f:{"0":0},b:{"0":[0,0]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"fbad5f20607d0f4aee17bd822e3ba74dd8428596"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_3b0pv71ju=function(){return actualCoverage;};}return actualCoverage;}cov_3b0pv71ju();const{readJSON,writeJSON}=(cov_3b0pv71ju().s[0]++,require('./UserUtil'));const fs=(cov_3b0pv71ju().s[1]++,require('fs').promises);async function EndOfDay(req,res){cov_3b0pv71ju().f[0]++;cov_3b0pv71ju().s[2]++;try{const allProfile=(cov_3b0pv71ju().s[3]++,await readJSON('utils/users.json'));var todaydate=(cov_3b0pv71ju().s[4]++,new Date().toLocaleDateString());//to check with a new day
cov_3b0pv71ju().s[5]++;for(var i=(cov_3b0pv71ju().s[6]++,0);i<allProfile.length;i++){var curcurrProfile=(cov_3b0pv71ju().s[7]++,allProfile[i]);cov_3b0pv71ju().s[8]++;if(curcurrProfile.date==todaydate){cov_3b0pv71ju().b[0][0]++;cov_3b0pv71ju().s[9]++;//if date is same as current day, to send info of users that worked that day, this function is designed to collect information of all before the clock hits midnight
await fs.writeFile('utils/eod.json',JSON.stringify(allProfile),'utf-8');//writes current info into eod.json
cov_3b0pv71ju().s[10]++;return res.status(201).json({message:'End of day'});}else{cov_3b0pv71ju().b[0][1]++;}}}catch(error){cov_3b0pv71ju().s[11]++;return res.status(500).json({message:error.message});}};cov_3b0pv71ju().s[12]++;module.exports={EndOfDay};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJjb3ZfM2IwcHY3MWp1IiwiYWN0dWFsQ292ZXJhZ2UiLCJyZWFkSlNPTiIsIndyaXRlSlNPTiIsInMiLCJyZXF1aXJlIiwiZnMiLCJwcm9taXNlcyIsIkVuZE9mRGF5IiwicmVxIiwicmVzIiwiZiIsImFsbFByb2ZpbGUiLCJ0b2RheWRhdGUiLCJEYXRlIiwidG9Mb2NhbGVEYXRlU3RyaW5nIiwiaSIsImxlbmd0aCIsImN1cmN1cnJQcm9maWxlIiwiZGF0ZSIsImIiLCJ3cml0ZUZpbGUiLCJKU09OIiwic3RyaW5naWZ5Iiwic3RhdHVzIiwianNvbiIsIm1lc3NhZ2UiLCJlcnJvciIsIm1vZHVsZSIsImV4cG9ydHMiXSwic291cmNlcyI6WyJFbmRPZkRheS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJcclxuY29uc3QgeyByZWFkSlNPTiwgd3JpdGVKU09OIH0gPSByZXF1aXJlKCcuL1VzZXJVdGlsJylcclxuXHJcbmNvbnN0IGZzID1yZXF1aXJlKCdmcycpLnByb21pc2VzO1xyXG5hc3luYyBmdW5jdGlvbiBFbmRPZkRheShyZXEscmVzKXtcclxuICAgIHRyeXtcclxuICAgIFxyXG5cclxuXHJcbiAgICBjb25zdCBhbGxQcm9maWxlID1hd2FpdCByZWFkSlNPTigndXRpbHMvdXNlcnMuanNvbicpO1xyXG5cclxuICAgXHJcbiAgICB2YXIgdG9kYXlkYXRlPW5ldyBEYXRlKCkudG9Mb2NhbGVEYXRlU3RyaW5nKCk7Ly90byBjaGVjayB3aXRoIGEgbmV3IGRheVxyXG4gICAgZm9yKHZhciBpPTA7aTxhbGxQcm9maWxlLmxlbmd0aDtpKyspe1xyXG4gICAgICAgIHZhciBjdXJjdXJyUHJvZmlsZSA9YWxsUHJvZmlsZVtpXTtcclxuICAgICAgICBcclxuXHJcbiAgICAgICAgICAgIGlmKGN1cmN1cnJQcm9maWxlLmRhdGU9PXRvZGF5ZGF0ZSl7Ly9pZiBkYXRlIGlzIHNhbWUgYXMgY3VycmVudCBkYXksIHRvIHNlbmQgaW5mbyBvZiB1c2VycyB0aGF0IHdvcmtlZCB0aGF0IGRheSwgdGhpcyBmdW5jdGlvbiBpcyBkZXNpZ25lZCB0byBjb2xsZWN0IGluZm9ybWF0aW9uIG9mIGFsbCBiZWZvcmUgdGhlIGNsb2NrIGhpdHMgbWlkbmlnaHRcclxuXHJcbiAgICAgICAgICAgICAgICBhd2FpdCBmcy53cml0ZUZpbGUoJ3V0aWxzL2VvZC5qc29uJyxKU09OLnN0cmluZ2lmeShhbGxQcm9maWxlKSwndXRmLTgnKTsvL3dyaXRlcyBjdXJyZW50IGluZm8gaW50byBlb2QuanNvblxyXG4gICAgICAgICAgICAgICAgIHJldHVybiByZXMuc3RhdHVzKDIwMSkuanNvbih7bWVzc2FnZTonRW5kIG9mIGRheSd9KTtcclxuICAgICAgICAgICAgfVxyXG59fWNhdGNoKGVycm9yKXtcclxucmV0dXJuIHJlcy5zdGF0dXMoNTAwKS5qc29uKHttZXNzYWdlOiBlcnJvci5tZXNzYWdlfSk7XHJcbn1cclxufTtcclxuXHJcblxyXG5tb2R1bGUuZXhwb3J0cz17XHJcbiAgRW5kT2ZEYXlcclxufTsiXSwibWFwcGluZ3MiOiJ5eURBZVk7QUFBQUEsYUFBQSxTQUFBQSxDQUFBLFNBQUFDLGNBQUEsV0FBQUEsY0FBQSxFQUFBRCxhQUFBLEdBZFosS0FBTSxDQUFFRSxRQUFRLENBQUVDLFNBQVUsQ0FBQyxFQUFBSCxhQUFBLEdBQUFJLENBQUEsTUFBR0MsT0FBTyxDQUFDLFlBQVksQ0FBQyxFQUVyRCxLQUFNLENBQUFDLEVBQUUsRUFBQU4sYUFBQSxHQUFBSSxDQUFBLE1BQUVDLE9BQU8sQ0FBQyxJQUFJLENBQUMsQ0FBQ0UsUUFBUSxFQUNoQyxjQUFlLENBQUFDLFFBQVFBLENBQUNDLEdBQUcsQ0FBQ0MsR0FBRyxDQUFDLENBQUFWLGFBQUEsR0FBQVcsQ0FBQSxNQUFBWCxhQUFBLEdBQUFJLENBQUEsTUFDNUIsR0FBRyxDQUlILEtBQU0sQ0FBQVEsVUFBVSxFQUFBWixhQUFBLEdBQUFJLENBQUEsTUFBRSxLQUFNLENBQUFGLFFBQVEsQ0FBQyxrQkFBa0IsQ0FBQyxFQUdwRCxHQUFJLENBQUFXLFNBQVMsRUFBQWIsYUFBQSxHQUFBSSxDQUFBLE1BQUMsR0FBSSxDQUFBVSxJQUFJLENBQUMsQ0FBQyxDQUFDQyxrQkFBa0IsQ0FBQyxDQUFDLEVBQUM7QUFBQWYsYUFBQSxHQUFBSSxDQUFBLE1BQzlDLElBQUksR0FBSSxDQUFBWSxDQUFDLEVBQUFoQixhQUFBLEdBQUFJLENBQUEsTUFBQyxDQUFDLEVBQUNZLENBQUMsQ0FBQ0osVUFBVSxDQUFDSyxNQUFNLENBQUNELENBQUMsRUFBRSxDQUFDLENBQ2hDLEdBQUksQ0FBQUUsY0FBYyxFQUFBbEIsYUFBQSxHQUFBSSxDQUFBLE1BQUVRLFVBQVUsQ0FBQ0ksQ0FBQyxDQUFDLEVBQUNoQixhQUFBLEdBQUFJLENBQUEsTUFHOUIsR0FBR2MsY0FBYyxDQUFDQyxJQUFJLEVBQUVOLFNBQVMsQ0FBQyxDQUFBYixhQUFBLEdBQUFvQixDQUFBLFNBQUFwQixhQUFBLEdBQUFJLENBQUEsTUFBQztBQUUvQixLQUFNLENBQUFFLEVBQUUsQ0FBQ2UsU0FBUyxDQUFDLGdCQUFnQixDQUFDQyxJQUFJLENBQUNDLFNBQVMsQ0FBQ1gsVUFBVSxDQUFDLENBQUMsT0FBTyxDQUFDLENBQUM7QUFBQVosYUFBQSxHQUFBSSxDQUFBLE9BQ3ZFLE1BQU8sQ0FBQU0sR0FBRyxDQUFDYyxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUNDLElBQUksQ0FBQyxDQUFDQyxPQUFPLENBQUMsWUFBWSxDQUFDLENBQUMsQ0FDeEQsQ0FBQyxLQUFBMUIsYUFBQSxHQUFBb0IsQ0FBQSxVQUNiLENBQUMsQ0FBQyxNQUFNTyxLQUFLLENBQUMsQ0FBQTNCLGFBQUEsR0FBQUksQ0FBQSxPQUNkLE1BQU8sQ0FBQU0sR0FBRyxDQUFDYyxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUNDLElBQUksQ0FBQyxDQUFDQyxPQUFPLENBQUVDLEtBQUssQ0FBQ0QsT0FBTyxDQUFDLENBQUMsQ0FDckQsQ0FDQSxDQUFDLENBQUMxQixhQUFBLEdBQUFJLENBQUEsT0FHRndCLE1BQU0sQ0FBQ0MsT0FBTyxDQUFDLENBQ2JyQixRQUNGLENBQUMifQ==