function cov_2ftthij6ow(){var path="C:\\Users\\ryanl\\Documents\\DVOPS_Projects\\project\\DVOPS-part1\\utils\\EndOfDay.js";var hash="b57047dd6a655891c37b273ecd416dc6a51a7a84";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"C:\\Users\\ryanl\\Documents\\DVOPS_Projects\\project\\DVOPS-part1\\utils\\EndOfDay.js",statementMap:{"0":{start:{line:2,column:32},end:{line:2,column:53}},"1":{start:{line:4,column:10},end:{line:4,column:32}},"2":{start:{line:6,column:4},end:{line:25,column:1}},"3":{start:{line:10,column:22},end:{line:10,column:56}},"4":{start:{line:13,column:18},end:{line:13,column:49}},"5":{start:{line:14,column:4},end:{line:23,column:1}},"6":{start:{line:14,column:14},end:{line:14,column:15}},"7":{start:{line:15,column:28},end:{line:15,column:41}},"8":{start:{line:18,column:12},end:{line:22,column:13}},"9":{start:{line:20,column:16},end:{line:20,column:88}},"10":{start:{line:21,column:17},end:{line:21,column:69}},"11":{start:{line:24,column:0},end:{line:24,column:54}},"12":{start:{line:29,column:0},end:{line:31,column:2}}},fnMap:{"0":{name:"EndOfDay",decl:{start:{line:5,column:15},end:{line:5,column:23}},loc:{start:{line:5,column:32},end:{line:26,column:1}},line:5}},branchMap:{"0":{loc:{start:{line:18,column:12},end:{line:22,column:13}},type:"if",locations:[{start:{line:18,column:12},end:{line:22,column:13}},{start:{line:18,column:12},end:{line:22,column:13}}],line:18}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0},f:{"0":0},b:{"0":[0,0]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"b57047dd6a655891c37b273ecd416dc6a51a7a84"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_2ftthij6ow=function(){return actualCoverage;};}return actualCoverage;}cov_2ftthij6ow();const{readJSON,writeJSON}=(cov_2ftthij6ow().s[0]++,require('./UserUtil'));const fs=(cov_2ftthij6ow().s[1]++,require('fs').promises);async function EndOfDay(req,res){cov_2ftthij6ow().f[0]++;cov_2ftthij6ow().s[2]++;try{const allProfile=(cov_2ftthij6ow().s[3]++,await readJSON('utils/users.json'));var todaydate=(cov_2ftthij6ow().s[4]++,new Date().toLocaleDateString());//to check with a new day
cov_2ftthij6ow().s[5]++;for(var i=(cov_2ftthij6ow().s[6]++,0);i<allProfile.length;i++){var curcurrProfile=(cov_2ftthij6ow().s[7]++,allProfile[i]);cov_2ftthij6ow().s[8]++;if(curcurrProfile.date==todaydate){cov_2ftthij6ow().b[0][0]++;cov_2ftthij6ow().s[9]++;//if date is same as current day, to send info of users that worked that day, this function is designed to collect information of all before the clock hits midnight
await fs.writeFile('utils/eod.json',JSON.stringify(allProfile),'utf-8');//writes current info into eod.json
cov_2ftthij6ow().s[10]++;return res.status(201).json({message:'End of day'});}else{cov_2ftthij6ow().b[0][1]++;}}}catch(error){cov_2ftthij6ow().s[11]++;return res.status(500).json({message:error.message});}};cov_2ftthij6ow().s[12]++;module.exports={EndOfDay};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJjb3ZfMmZ0dGhpajZvdyIsImFjdHVhbENvdmVyYWdlIiwicmVhZEpTT04iLCJ3cml0ZUpTT04iLCJzIiwicmVxdWlyZSIsImZzIiwicHJvbWlzZXMiLCJFbmRPZkRheSIsInJlcSIsInJlcyIsImYiLCJhbGxQcm9maWxlIiwidG9kYXlkYXRlIiwiRGF0ZSIsInRvTG9jYWxlRGF0ZVN0cmluZyIsImkiLCJsZW5ndGgiLCJjdXJjdXJyUHJvZmlsZSIsImRhdGUiLCJiIiwid3JpdGVGaWxlIiwiSlNPTiIsInN0cmluZ2lmeSIsInN0YXR1cyIsImpzb24iLCJtZXNzYWdlIiwiZXJyb3IiLCJtb2R1bGUiLCJleHBvcnRzIl0sInNvdXJjZXMiOlsiRW5kT2ZEYXkuanMiXSwic291cmNlc0NvbnRlbnQiOlsiXHJcbmNvbnN0IHsgcmVhZEpTT04sIHdyaXRlSlNPTiB9ID0gcmVxdWlyZSgnLi9Vc2VyVXRpbCcpXHJcblxyXG5jb25zdCBmcyA9cmVxdWlyZSgnZnMnKS5wcm9taXNlcztcclxuYXN5bmMgZnVuY3Rpb24gRW5kT2ZEYXkocmVxLHJlcyl7XHJcbiAgICB0cnl7XHJcbiAgICBcclxuXHJcblxyXG4gICAgY29uc3QgYWxsUHJvZmlsZSA9YXdhaXQgcmVhZEpTT04oJ3V0aWxzL3VzZXJzLmpzb24nKTtcclxuXHJcbiAgIFxyXG4gICAgdmFyIHRvZGF5ZGF0ZT1uZXcgRGF0ZSgpLnRvTG9jYWxlRGF0ZVN0cmluZygpOy8vdG8gY2hlY2sgd2l0aCBhIG5ldyBkYXlcclxuICAgIGZvcih2YXIgaT0wO2k8YWxsUHJvZmlsZS5sZW5ndGg7aSsrKXtcclxuICAgICAgICB2YXIgY3VyY3VyclByb2ZpbGUgPWFsbFByb2ZpbGVbaV07XHJcbiAgICAgICAgXHJcblxyXG4gICAgICAgICAgICBpZihjdXJjdXJyUHJvZmlsZS5kYXRlPT10b2RheWRhdGUpey8vaWYgZGF0ZSBpcyBzYW1lIGFzIGN1cnJlbnQgZGF5LCB0byBzZW5kIGluZm8gb2YgdXNlcnMgdGhhdCB3b3JrZWQgdGhhdCBkYXksIHRoaXMgZnVuY3Rpb24gaXMgZGVzaWduZWQgdG8gY29sbGVjdCBpbmZvcm1hdGlvbiBvZiBhbGwgYmVmb3JlIHRoZSBjbG9jayBoaXRzIG1pZG5pZ2h0XHJcblxyXG4gICAgICAgICAgICAgICAgYXdhaXQgZnMud3JpdGVGaWxlKCd1dGlscy9lb2QuanNvbicsSlNPTi5zdHJpbmdpZnkoYWxsUHJvZmlsZSksJ3V0Zi04Jyk7Ly93cml0ZXMgY3VycmVudCBpbmZvIGludG8gZW9kLmpzb25cclxuICAgICAgICAgICAgICAgICByZXR1cm4gcmVzLnN0YXR1cygyMDEpLmpzb24oe21lc3NhZ2U6J0VuZCBvZiBkYXknfSk7XHJcbiAgICAgICAgICAgIH1cclxufX1jYXRjaChlcnJvcil7XHJcbnJldHVybiByZXMuc3RhdHVzKDUwMCkuanNvbih7bWVzc2FnZTogZXJyb3IubWVzc2FnZX0pO1xyXG59XHJcbn07XHJcblxyXG5cclxubW9kdWxlLmV4cG9ydHM9e1xyXG4gIEVuZE9mRGF5XHJcbn07Il0sIm1hcHBpbmdzIjoia3hEQWVZO0FBQUFBLGNBQUEsU0FBQUEsQ0FBQSxTQUFBQyxjQUFBLFdBQUFBLGNBQUEsRUFBQUQsY0FBQSxHQWRaLEtBQU0sQ0FBRUUsUUFBUSxDQUFFQyxTQUFVLENBQUMsRUFBQUgsY0FBQSxHQUFBSSxDQUFBLE1BQUdDLE9BQU8sQ0FBQyxZQUFZLENBQUMsRUFFckQsS0FBTSxDQUFBQyxFQUFFLEVBQUFOLGNBQUEsR0FBQUksQ0FBQSxNQUFFQyxPQUFPLENBQUMsSUFBSSxDQUFDLENBQUNFLFFBQVEsRUFDaEMsY0FBZSxDQUFBQyxRQUFRQSxDQUFDQyxHQUFHLENBQUNDLEdBQUcsQ0FBQyxDQUFBVixjQUFBLEdBQUFXLENBQUEsTUFBQVgsY0FBQSxHQUFBSSxDQUFBLE1BQzVCLEdBQUcsQ0FJSCxLQUFNLENBQUFRLFVBQVUsRUFBQVosY0FBQSxHQUFBSSxDQUFBLE1BQUUsS0FBTSxDQUFBRixRQUFRLENBQUMsa0JBQWtCLENBQUMsRUFHcEQsR0FBSSxDQUFBVyxTQUFTLEVBQUFiLGNBQUEsR0FBQUksQ0FBQSxNQUFDLEdBQUksQ0FBQVUsSUFBSSxDQUFDLENBQUMsQ0FBQ0Msa0JBQWtCLENBQUMsQ0FBQyxFQUFDO0FBQUFmLGNBQUEsR0FBQUksQ0FBQSxNQUM5QyxJQUFJLEdBQUksQ0FBQVksQ0FBQyxFQUFBaEIsY0FBQSxHQUFBSSxDQUFBLE1BQUMsQ0FBQyxFQUFDWSxDQUFDLENBQUNKLFVBQVUsQ0FBQ0ssTUFBTSxDQUFDRCxDQUFDLEVBQUUsQ0FBQyxDQUNoQyxHQUFJLENBQUFFLGNBQWMsRUFBQWxCLGNBQUEsR0FBQUksQ0FBQSxNQUFFUSxVQUFVLENBQUNJLENBQUMsQ0FBQyxFQUFDaEIsY0FBQSxHQUFBSSxDQUFBLE1BRzlCLEdBQUdjLGNBQWMsQ0FBQ0MsSUFBSSxFQUFFTixTQUFTLENBQUMsQ0FBQWIsY0FBQSxHQUFBb0IsQ0FBQSxTQUFBcEIsY0FBQSxHQUFBSSxDQUFBLE1BQUM7QUFFL0IsS0FBTSxDQUFBRSxFQUFFLENBQUNlLFNBQVMsQ0FBQyxnQkFBZ0IsQ0FBQ0MsSUFBSSxDQUFDQyxTQUFTLENBQUNYLFVBQVUsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxDQUFDO0FBQUFaLGNBQUEsR0FBQUksQ0FBQSxPQUN2RSxNQUFPLENBQUFNLEdBQUcsQ0FBQ2MsTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDQyxJQUFJLENBQUMsQ0FBQ0MsT0FBTyxDQUFDLFlBQVksQ0FBQyxDQUFDLENBQ3hELENBQUMsS0FBQTFCLGNBQUEsR0FBQW9CLENBQUEsVUFDYixDQUFDLENBQUMsTUFBTU8sS0FBSyxDQUFDLENBQUEzQixjQUFBLEdBQUFJLENBQUEsT0FDZCxNQUFPLENBQUFNLEdBQUcsQ0FBQ2MsTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDQyxJQUFJLENBQUMsQ0FBQ0MsT0FBTyxDQUFFQyxLQUFLLENBQUNELE9BQU8sQ0FBQyxDQUFDLENBQ3JELENBQ0EsQ0FBQyxDQUFDMUIsY0FBQSxHQUFBSSxDQUFBLE9BR0Z3QixNQUFNLENBQUNDLE9BQU8sQ0FBQyxDQUNickIsUUFDRixDQUFDIn0=